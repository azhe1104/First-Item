import{P as e}from"./PageContainer-57fdfbc0.js";import{r as a,u as l,a as r,o as s,c as d,b as o,d as u,f as t,bZ as p,E as m}from"../js/index.59ed1cba.js";import{a as i,E as n}from"./el-col-6d6abec9.js";import{E as w,a as _}from"./el-form-item-685137e5.js";import{E as g}from"./_plugin-vue_export-helper-e0fdcb00.js";import{E as f}from"./el-input-ba32eb66.js";/* empty css                   */import"./_baseClone-7610e4dc.js";const b={__name:"UserPassword",setup(b){const v=a(),c=a({old_pwd:"",new_pwd:"",re_pwd:""}),j={old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{min:6,max:15,message:"密码长度在 6 到 15 个字符",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"密码长度在 6 到 15 个字符",trigger:"blur"},{validator:(e,a,l)=>{a===c.value.old_pwd?l(new Error("新密码不能和原密码一样")):l()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{min:6,max:15,message:"密码长度在 6 到 15 个字符",trigger:"blur"},{validator:(e,a,l)=>{a!==c.value.new_pwd?l(new Error("确认密码和新密码不一致")):l()},trigger:"blur"}]},V=l(),h=r(),x=async()=>{v.value.validate(),await p(c.value),m.success("修改成功"),V.setToken(""),V.setUser({}),h.push("/login")},y=()=>{v.value.resetFields()};return(a,l)=>{const r=f,p=w,m=g,b=_,V=i,h=n,E=e;return s(),d(E,{title:"修改密码"},{default:o((()=>[u(h,null,{default:o((()=>[u(V,{span:12},{default:o((()=>[u(b,{model:c.value,rules:j,ref_key:"formRef",ref:v,"label-width":"100px",size:"large"},{default:o((()=>[u(p,{label:"原密码",prop:"old_pwd"},{default:o((()=>[u(r,{modelValue:c.value.old_pwd,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value.old_pwd=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1}),u(p,{label:"新密码",prop:"new_pwd"},{default:o((()=>[u(r,{modelValue:c.value.new_pwd,"onUpdate:modelValue":l[1]||(l[1]=e=>c.value.new_pwd=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1}),u(p,{label:"确认密码",prop:"re_pwd"},{default:o((()=>[u(r,{modelValue:c.value.re_pwd,"onUpdate:modelValue":l[2]||(l[2]=e=>c.value.re_pwd=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1}),u(p,null,{default:o((()=>[u(m,{type:"primary",onClick:x},{default:o((()=>[t("修改密码")])),_:1}),u(m,{onClick:y},{default:o((()=>[t("重置")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1})}}};export{b as default};
